<!doctype html>
<html lang="en">
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Classroom â€” Teacher</title>
	<link rel="preconnect" href="https://fonts.googleapis.com">
	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
	<link rel="stylesheet" href="assets/css/styles.css">
</head>
<body>
	<header class="site-header">
		<div class="container nav">
			<div class="brand"><div class="brand-logo" aria-hidden="true"></div><span>Classroom</span></div>
			<nav class="nav-actions" aria-label="Primary">
				<a class="btn btn-ghost" href="dashboards.html">Dashboard</a>
				<a class="btn btn-ghost" href="teacher.html">Teacher</a>
				<a class="btn btn-ghost" href="student.html">Student</a>
				<a class="btn btn-primary" href="logout.html">Logout</a>
			</nav>
		</div>
	</header>
	<main class="section">
		<div class="container">
			<h1 style="margin-top:0">Teacher Classes</h1>
			<div class="card" style="padding:16px;margin-bottom:16px">
				<form id="newClassForm" class="form" style="grid-template-columns:1fr auto;align-items:center">
					<div class="input"><input id="className" placeholder="Class name"></div>
					<button class="btn btn-primary" type="submit">Create</button>
				</form>
			</div>
			<div class="grid-3" id="tClassList"></div>
		</div>
	</main>
	<script src="assets/js/app.js"></script>
	<script>
		window.addEventListener('DOMContentLoaded',()=>{
			if(!window.App) return; App.guard('teacher');
			const listEl=document.getElementById('tClassList');
			function render(){
				App.api('/teacher/classes').then(rows=>{
					listEl.innerHTML='';
					rows.forEach(r=>{
						const card=document.createElement('div'); card.className='card'; card.style.padding='16px';
						card.innerHTML=`<h3>${r.name}</h3><div class="muted">Join code: ${r.join_code}</div>
						<div style="display:flex;gap:8px;margin-top:8px">
							<a class="btn" href="teacher_class.html?id=${r.id}">Open</a>
						</div>`;
						listEl.appendChild(card);
					});
				});
			}
			render();
			document.getElementById('newClassForm').onsubmit=(e)=>{ e.preventDefault(); const name=document.getElementById('className').value.trim(); if(!name) return; App.api('/teacher/classes',{method:'POST',body:JSON.stringify({name})}).then(()=>{ render(); document.getElementById('className').value=''; }).catch(err=>alert(err.message)); };
		});
	</script>
</body>
</html>

