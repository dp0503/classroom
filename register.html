<!doctype html>
<html lang="en">
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Classroom â€” Register</title>
	<link rel="preconnect" href="https://fonts.googleapis.com">
	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
	<link rel="stylesheet" href="assets/css/styles.css">
</head>
<body>
	<div class="login-wrap">
		<div class="container" style="width:100%">
			<header class="nav" style="margin:16px 0">
				<div class="brand"><div class="brand-logo" aria-hidden="true"></div><span>Classroom</span></div>
				<a class="btn" href="login.html">Login</a>
			</header>
			<main class="login-card fade-up" role="main">
				<section class="login-illustration" aria-hidden="true"><span class="muted">Welcome</span></section>
				<section>
					<h1 style="margin-top:0">Create your account</h1>
					<form id="regForm" class="form">
						<div class="input"><input id="rName" placeholder="Full name" required></div>
						<div class="input"><input id="rEmail" type="email" placeholder="Email" required></div>
						<div class="input"><input id="rPassword" type="password" placeholder="Password" required><button type="button" id="rShow" class="btn" style="margin-left:8px">Show</button></div>
						<div class="input"><select id="rRole"><option value="student">Student</option><option value="teacher">Teacher</option><option value="admin">Admin</option></select></div>
						<div id="rMsg" class="muted" style="min-height:20px"></div>
						<button class="btn btn-primary" type="submit">Register</button>
					</form>
				</section>
			</main>
		</div>
	</div>
	<script src="assets/js/app.js"></script>
	<script>
		window.addEventListener('DOMContentLoaded',()=>{ if(window.App){
			const rShow=document.getElementById('rShow'); const rPassword=document.getElementById('rPassword');
			rShow.onclick=()=>{ rPassword.type=rPassword.type==='password'?'text':'password'; rShow.textContent=rPassword.type==='password'?'Show':'Hide'; };
			const form=document.getElementById('regForm'); const msg=document.getElementById('rMsg');
			form.onsubmit=async (e)=>{ e.preventDefault(); msg.textContent='';
				try{ const out=await App.apiCall('/auth/register',{name:rName.value,email:rEmail.value,password:rPassword.value,role:rRole.value}); msg.innerHTML='Verify via <code>'+out.verifyUrl+'</code>'; }
				catch(err){ msg.textContent=err.message||'Registration failed'; }
			};
		}});
	</script>
</body>
</html>

